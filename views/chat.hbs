<div class="container py-2 w-50">
    <!-- Chat box -->
    <div id="chatArea" class="chat-area p-2 mb-3" data-id="{{chatId}}" style="height: 650px">
        {{#each conversations}}
        <div class="my-4{{#if (eq this.role 'user')}}text-end right-middle{{/if}}">
            {{#if (eq this.role 'user')}}
            <button class="btn btn-sm speak-btn" data-text="{{message}}" title="Nghe">🔊</button>
            <div
                class='text-justify chat-bubble text-start d-inline-block px-4 py-2 rounded-pill text-break bg-primary'>
                {{{highlightWords message}}}</div>
            {{else}}
            <div class='text-justify bg-white'>{{{highlightWords message}}}<button style="margin-bottom:3px"
                    class="speak-btn btn btn-sm ms-2" data-text="{{message}}" title="Nghe">🔊</button></div>
            {{/if}}
        </div>
        {{/each}}
    </div>

    <!-- Input -->
    <div class="mb-3">
        <textarea id="inputText" class="form-control" rows="2" placeholder="Speak or type anything here..."
            style="resize: none;"></textarea>
    </div>

    <!-- Suggestions -->
    <div id="suggestions" class="d-flex flex-wrap gap-2"></div>

    <!-- Buttons -->
    <div class="d-flex gap-2 mt-3">
        <button id="recordBtn" class="btn btn-outline-danger w-50 rounded-5">🎙️ Record</button>
        <button id="sendBtn" class="btn btn-primary w-50 rounded-5">Send ➤</button>
    </div>
</div>

<!-- Word Definition Modal -->
<div class="modal fade" id="wordModal" tabindex="-1" aria-labelledby="wordModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="wordModalLabel">Word Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalContent">
                <!-- Nội dung từ điển sẽ được đưa vào đây -->
            </div>
        </div>
    </div>
</div>

<script src="/js/chat-history.js"></script>

<script>
    const suggestions = document.getElementById('suggestions');
    document.addEventListener('DOMContentLoaded', () => {
        const chatArea = document.getElementById('chatArea');
        if (chatArea) {
            chatArea.scrollTo({ top: chatArea.scrollHeight, behavior: 'smooth' });
        }
    });

</script>